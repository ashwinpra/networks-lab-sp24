todo: implement mutual exclusion while accessing shared memory
error in recv
